<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>æ¾³é–€ç¾é£Ÿæ¨‚é€æŠ½ç±¤ï¼ˆé¤å»³å€åŠ å¤§å®Œæ•´é¡¯ç¤ºç‰ˆï¼‰</title>
<style>
  * { box-sizing: border-box; }
  body {
    font-family: "å¾®è»Ÿæ­£é»‘é«”", Helvetica, Arial, sans-serif;
    margin: 0; padding: 0;
    background: url('Xie-Qu.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #1c1c1c;
    display: flex;
    gap: 12px;
    height: 100vh;
    overflow: hidden;
    flex-wrap: wrap;
    justify-content: center;
    position: relative;
  }
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(255,255,255,0.12);
    z-index: 0;
    pointer-events: none;
  }
  #history    { flex: 1.05 1 330px; }
  #main       { flex: 2   1 430px; }
  #all-restaurants { flex: 1.18 1 440px; }

  #history, #main, #all-restaurants {
    background: rgba(255, 248, 230, 0.92);
    padding: 20px 18px;
    border-radius: 14px;
    box-shadow: 0 10px 15px rgba(217,175,65,0.6),
                inset 0 0 15px rgba(255,244,210,0.8);
    border: 3px solid #d9ae41;
    font-size: 16px;
    font-weight: 600;
    position: relative;
    line-height: 1.5;
    z-index: 1;
    min-width: 0;
    backdrop-filter: saturate(180%) blur(8px);
  }
  #history::before, #main::before, #all-restaurants::before {
    content: "";
    position: absolute;
    top: 12px; left: 12px; right: 12px; bottom: 12px;
    border: 3px solid #d6b84a;
    border-radius: 12px;
    pointer-events: none;
  }
  #history {
    max-height: 95vh;
    overflow-y: unset;
    display: flex;
    flex-direction: column;
    gap: 20px;
    justify-content: flex-start;
  }
  .history-block { margin-bottom: 0; display: flex; flex-direction: column; }
  #history-main, #history-dessert {
    max-height: 285px;
    overflow-y: auto;
    margin-top: 6px;
  }
  @media (max-width:900px) {
    #history-main, #history-dessert { max-height: 175px; }
  }
  #main {
    max-height: 95vh;
    text-align: center;
    display: flex;
    flex-direction: column;
    z-index: 1;
    align-items: center;
    justify-content: flex-start;
  }
  .button-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-bottom: 12px;
    width: 100%;
  }
  .button-row button {
    width: auto;
    display: inline-block;
    margin: 0;
    max-width: 180px;
  }
  #result {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    max-height: 45vh;
  }
  #itinerary {
    flex: 0 0 auto;
    margin-top: 12px;
    padding: 18px 10px 10px 10px;
    font-weight: 600;
    height: 200px;
    max-height: 200px;
    overflow-y: auto;
    border-radius: 14px;
    background: rgba(255, 248, 230, 0.95);
    box-shadow: 0 8px 12px rgba(217, 175, 65, 0.7), inset 0 0 14px rgba(255, 244, 210, 0.85);
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }
  #itinerary-list {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #itinerary .history-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    background: #fffceb;
    border-radius: 7px;
    padding: 12px 14px;
    margin-bottom: 10px;
    box-shadow: inset 0 0 6px rgba(217,175,65,0.35);
    word-break: break-word;
    width: 88%;
    max-width: 480px;
    font-size: 17px;
  }
  #itinerary .info {
    flex: 1;
    text-align: center;
    margin-right: 18px;
    overflow-wrap: break-word;
  }
  #itinerary .info strong {
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
    color: #916f02;
    font-size: 18px;
  }
  #itinerary .info a {
    color: #916f02;
    text-decoration: none;
  }
  #itinerary .info a:hover {
    text-decoration: underline;
    color: #d2a520;
  }
  #itinerary .history-item button {
    background: #b28722;
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: bold;
    padding: 7px 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
    font-size: 16px;
    margin-left: 8px;
  }
  #itinerary .history-item button:hover {
    background-color: #dbae3e;
  }
  h1,h2 { color: #b47f18; text-shadow: 1px 1px 3px rgba(168,134,20,0.8); margin-bottom: 15px;}
  button {
    background: linear-gradient(135deg, #b28722, #dbae3e);
    border: none; padding: 13px 26px; color: #fff8dc;
    font-size: 18px; font-weight: 700;
    border-radius: 28px; cursor: pointer; box-shadow: 0 5px 12px rgba(181,135,34,0.7);
    user-select: none;
  }
  .result-card {
    background: #fff5d9; border-radius: 12px; padding: 18px 14px;
    margin: 10px auto; width: 100%; max-width: 400px;
    box-shadow: 0 4px 15px rgba(208,169,47,0.7);
    text-align: center;
    font-size: 17px;
  }
  .result-card + .result-card { margin-top: 15px; }
  .address-link { color: #916f02; text-decoration: none;}
  .history-item {
    background: #fffceb; border-radius: 7px;
    padding: 11px 16px; margin-bottom: 14px;
    box-shadow: inset 0 0 6px rgba(217,175,65,0.35);
    word-break: break-word;
    font-size: 17px;
    text-align: center;
  }
  #all-restaurants strong { display:block; margin-top:16px; margin-bottom: 2px; font-size:17px;}
  ul {
    list-style: none;
    padding-left: 8px;
    font-size: 18px;
    margin-bottom: 10px;
    max-height: 470px;
    overflow-y: auto;
  }
  li {
    padding: 8px 0;
    border-bottom: 1px solid #d1b252;
    user-select: none;
  }
  @media (max-width:900px) {
    #history-main, #history-dessert { max-height: 175px; }
    body {flex-direction: column; padding: 14px;}
    #history,#main,#all-restaurants {width: 100%; min-width: unset; flex: none; margin-bottom: 10px;}
    #main {max-height: none; align-items: center;}
    .button-row button {font-size:16px; padding:9px 11px; max-width:110px;}
    .button-row {flex-wrap: wrap; gap:12px; margin-bottom:12px;}
    #itinerary {height: 140px; max-height: 140px; width:100%; margin-top: 8px;}
    #itinerary-list {width: 100%;}
    #result {max-height: 27vh;}
    ul {max-height: 220px;}
    #itinerary .history-item {font-size: 16px; padding: 10px 8px; max-width: 98%;}
  }
</style>
</head>
<body>

<div id="history">
  <div class="history-block">
    <h2>ğŸœ æ­£é¤æ­·å² (å‰5ç­†)</h2>
    <div id="history-main"></div>
  </div>
  <div class="history-block">
    <h2>ğŸ® ç”œé»æ­·å² (å‰5ç­†)</h2>
    <div id="history-dessert"></div>
  </div>
</div>

<div id="main">
  <h1>ğŸ½ æ¾³é–€ç¾é£Ÿæ¨‚é€æŠ½ç±¤</h1>
  <div class="button-row">
    <button onclick="drawLottery('main')">æŠ½æ­£é¤</button>
    <button onclick="drawLottery('dessert')">æŠ½ç”œé» / é£²æ–™</button>
    <button onclick="drawBoth()">åŒæ™‚æŠ½æ­£é¤ + ç”œé»</button>
  </div>
  <div id="result"></div>
  <div id="itinerary">
    <h2>ğŸ“… ä»Šæ—¥è¡Œç¨‹</h2>
    <div id="itinerary-list"></div>
  </div>
</div>

<div id="all-restaurants">
  <h2>æ‰€æœ‰é¤å»³</h2>
  <strong>ğŸœ æ­£é¤é¡</strong>
  <ul id="list-main"></ul>
  <strong>ğŸ® ç”œé» / é£²æ–™é¡</strong>
  <ul id="list-dessert"></ul>
</div>

<script>
const restaurantsMain = [
  {name:"é™³å…‰è¨˜ç‡’è‡˜åº—", dish:"é»‘æ¤’ç‡’é´¨ã€ç‡’éµã€ä¸‰æ‹¼é£¯", time:"09:00â€“01:00", address:"æ¾³é–€å—ç£ç¾…ä¿åšå£«è¡—19-39è™Ÿè¬å‹å¤§å»ˆ"},
  {name:"é›…é¦¨ç·¬ç”¸é¤å»³", dish:"é­šæ¹¯ç²‰ã€é¦¬æ‹‰ç›é›çµ²æ’ˆéºµ", time:"08:00â€“19:30", address:"æ¾³é–€æ–°æ©‹é£›èƒ½ä¾¿åº¦è¡—27è™Ÿåœ°ä¸‹Fåº§æ ¢ç›§å¤§å»ˆ"},
  {name:"é‡‘åˆ©é£Ÿåº—", dish:"å’–å“©é›ç±³ã€é›™æ±é›è…©ç±³ã€å’–å“©ç‰›è…©", time:"07:00â€“16:45", address:"æ¾³é–€é›…å»‰è¨ªå¤§é¦¬è·¯85è™ŸCåœ°ä¸‹"},
  {name:"å¾·ä»”è¨˜ç‡’å‘³èŒ¶é¤å»³", dish:"æ›çˆç‡’é´¨é£¯ã€è¥¿å¤šå£«ã€å‰ç‡’", time:"07:00â€“21:00", address:"æ¾³é–€æ°¹ä»”å—äº¬è¡—161è™Ÿ-177è™Ÿå¤ªå­èŠ±åŸåœ°ä¸‹B,C,Dèˆ–"},
  {name:"æ–°è¨˜ç¾é£Ÿ", dish:"è±¬å¤§è…¸ã€é›ä¸­ç¿…ã€ä¸¸é¡", time:"07:00â€“23:30", address:"æ¾³é–€é¦¬å ´å¤§é¦¬è·¯18è™Ÿæ ¢éº—èŠ±åœ’ç¬¬ä¸€åº§åŠäºŒåº§åœ°ä¸‹Ué‹ª"},
  {name:"å½ªè¨˜è…¸ç²‰ç¾é£Ÿ", dish:"é¦™æ»‘è…¸ç²‰ã€é¹¹è‚‰ç²½ã€ç¦æ»¿é­šç¿…é›æ¹¯æ³¡é£¯", time:"10:00â€“21:00", address:"æ¾³é–€é‡‘ç¢§åŠä¸€æ¨“107è™Ÿèˆ–"}
];
const restaurantsDessert = [
  {name:"å–œè“®å’–å•¡", dish:"ä¹¾ç‚’ç‰›è‚‰ç²’é£¯ã€ç‚¸å’–å“©è§’ã€æ¤°æ±ç´…è±†å†°", time:"å‘¨ä¸€07:00â€“17:00ï¼›å‘¨äºŒè‡³æ—¥07:30â€“20:30", address:"æ¾³é–€æ°¹ä»”é£›èƒ½ä¾¿åº¦è¡—å—é¾èŠ±åœ’åœ°ä¸‹B84è™Ÿ"},
  {name:"æ–°é´»ç™¼å’–å•¡ç¾é£Ÿ", dish:"æ³•è˜­è¥¿å¤šå£«ã€è¥¿å¤šå£«", time:"06:00â€“18:00", address:"æ¾³é–€è³ˆä¼¯æ¨‚æç£è¡—55è™Ÿå¯Œæ˜æ¨“Aè™Ÿ"},
  {name:"ä¸–ç´€å’–å•¡", dish:"ç“¦ç…²å’–å•¡ã€åšè›‹é¹¹ç‰›è‚‰å¤šå£«", time:"11:00â€“19:00 (å‘¨ä¸€ä¼‘)", address:"æ¾³é–€å—ç£æ¹–æ™¯å¤§é¦¬è·¯744Fè™Ÿæ¹–æ™¯è±ªåº­åœ°ä¸‹Eè™Ÿèˆ”"},
  {name:"Goat Bakers", dish:"å¥¶é…ªèŠ±æ¯å­ã€å½©è™¹ç‰›è§’éºµåŒ…", time:"12:00â€“20:00", address:"æ¾³é–€æ°¸è¯å°52è™Ÿæ°¸è¯å¤§å»ˆåœ°èˆ–"},
  {name:"ä¸–è¨˜å’–å•¡", dish:"ç“¦ç…²å’–å•¡ã€é¦™æ»‘å¥¶èŒ¶ã€è±¬æ‰’åŒ…", time:"11:00â€“19:00 (å‘¨äºŒä¼‘)", address:"æ¾³é–€ä¹¾è‰åœ15è™Ÿ"},
  {name:"å—å±é›…æ•˜", dish:"ä¸‰æ–‡æ²»ã€å¤šå£«ã€è›‹æ’»", time:"06:30èµ·ç‡Ÿæ¥­", address:"æ¾³é–€å¤§ä¸‰å·´ç‰ŒåŠé™„è¿‘"},
  {name:"Inn Cafe", dish:"æ¾³é–€ç‰¹è‰²å°åƒ", time:"ç‡Ÿæ¥­æ™‚é–“å¾…ç¢ºèª", address:"æ¾³é–€å˜‰æ¨‚åº‡ç¸½ç£å¤§é¦¬è·¯822è™Ÿ"},
  {name:"å®‰çªå…’å’–å•¡åŠé…’å»Š", dish:"å’–å•¡ã€è¼•é£Ÿ", time:"07:30â€“23:00 (äº”å…­æ—¥åˆ°00:00)", address:"æ¾³é–€è‘¡äº¬äººé…’åº—1æ¨“L04èˆ–"},
  {name:"ç‘ªå˜‰çƒˆè›‹å¡”åº—", dish:"è‘¡å¼è›‹å¡”", time:"å¹³æ—¥08:30â€“16:30ï¼›å‡æ—¥10:00â€“18:00 (å‘¨ä¸‰ä¼‘)", address:"æ¾³é–€é¦¬çµ±é ˜åœ66è™Ÿ"},
  {name:"å®‰å¾·é­¯é¤…åº—", dish:"è‘¡å¼è›‹å¡”", time:"07:00â€“21:00", address:"æ¾³é–€è·¯ç’°å¸‚å€æˆ´ç´³ç¦®è¡—1è™Ÿ"},
  {name:"ç¾©é †ç‰›å¥¶å…¬å¸", dish:"é›™çš®ç‡‰å¥¶ã€ç‡‰å¥¶", time:"11:00â€“21:00", address:"æ¾³é–€äºç¾æ‰“åˆ©åº‡ç›§å¤§é¦¬è·¯381è™Ÿ"},
  {name:"æª¸æª¬è»Šéœ²å†°åº—", dish:"ç¾©å¤§åˆ©æ‰‹æ‹‰é›ªç³•", time:"12:00â€“22:00", address:"æ¾³é–€æ°¹ä»”åœ°å ¡è¡—115è™ŸJé‹ª"},
  {name:"ç¦®è¨˜é›ªç³•", dish:"ç´…è±†å†°ã€æ‡·èˆŠé›ªç³•ä¸‰æ–‡æ²»", time:"12:00â€“19:00", address:"æ¾³é–€è·è˜­åœ’å¤§é¦¬è·¯12è™Ÿåœ°ä¸‹"},
  {name:"ç¦®è¨˜é›ªç³•(é‡è¤‡åˆ†åº—)", dish:"å‚³çµ±é›ªç³•ã€ç´…è±†é›ªæ¢", time:"12:00â€“19:00", address:"æ¾³é–€è·è˜­åœ’å¤§é¦¬è·¯12è™Ÿåœ°ä¸‹"},
  {name:"å…«ç›®çƒ˜åŸ¹ bamu bakery", dish:"è‘¡å¼è›‹å¡”ã€ç„¦ç³–è›‹å¡”", time:"10:00â€“19:00", address:"æ¾³é–€æœæ¬„è¡—25è™Ÿå¾·å¯Œå¤§å»ˆåœ°ä¸‹Bèˆ–"},
  {name:"æ¾¤è³¢è¨˜é›è›‹ä»”", dish:"è‘¡æ’»é›è›‹ä»”ã€å¤šå£å‘³é›è›‹ä»”", time:"10:30â€“21:00", address:"æ¾³é–€å®‰æ¨‚è¡—13-15è™Ÿ"}
];
let historyMain = [], historyDessert = [], itinerary = [];
function drawLottery(type){
  const pool = type==='main'?restaurantsMain:restaurantsDessert;
  let list= type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0; avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  displayResult([pick]);
  list.unshift(pick);
  if(list.length>5) list.pop();
  if(type==='main') historyMain=list; else historyDessert=list;
  updateHistory();
}
function drawBoth(){
  const pickMain= pickOne('main');
  const pickDessert= pickOne('dessert');
  displayResult([pickMain,pickDessert]);
  updateHistory();
}
function pickOne(type){
  const pool= type==='main'?restaurantsMain:restaurantsDessert;
  let list= type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0; avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  list.unshift(pick);
  if(list.length>5) list.pop();
  if(type==='main') historyMain=list; else historyDessert=list;
  return pick;
}
function displayResult(picks){
  document.getElementById('result').innerHTML= picks.map(p=>`
    <div class="result-card">
      <h2>${p.name}</h2>
      <p>ğŸ´ ${p.dish}</p>
      <p>ğŸ•’ ${p.time}</p>
      <p>ğŸ“ <a class="address-link" target="_blank" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.address)}">${p.address}</a></p>
      <button onclick='addToItinerary(${JSON.stringify(p)})'>â• åŠ å…¥è¡Œç¨‹</button>
    </div>
  `).join('');
}
function updateHistory(){
  document.getElementById('history-main').innerHTML= historyMain.map(h=>`<div class="history-item"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
  document.getElementById('history-dessert').innerHTML= historyDessert.map(h=>`<div class="history-item"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
}
function renderLists(){
  document.getElementById('list-main').innerHTML= restaurantsMain.map(r=>`<li>${r.name}</li>`).join('');
  document.getElementById('list-dessert').innerHTML= restaurantsDessert.map(r=>`<li>${r.name}</li>`).join('');
}
function addToItinerary(p){
  if(itinerary.some(i=>i.name===p.name)) return;
  itinerary.push(p);
  updateItineraryUI();
}
function removeFromItinerary(name){
  itinerary= itinerary.filter(i=>i.name!==name);
  updateItineraryUI();
}
function updateItineraryUI(){
  document.getElementById('itinerary-list').innerHTML= itinerary.map((i,idx)=>`
    <div class="history-item">
      <div class="info">
        <strong>${idx+1}. ${i.name}</strong><br>
        ${i.dish}<br>
        <a target="_blank" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.address)}">${i.address}</a>
      </div>
      <button onclick="removeFromItinerary('${i.name.replace(/'/g,"\\'")}')">åˆªé™¤</button>
    </div>
  `).join('');
}
renderLists();
updateHistory();
</script>
</body>
</html>
