<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>澳門美食樂透抽籤（餐廳區加大完整顯示版）</title>
<style>
  * { box-sizing: border-box; }
  body {
    font-family: "微軟正黑體", Helvetica, Arial, sans-serif;
    margin: 0; padding: 0;
    background: url('Xie-Qu.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #1c1c1c;
    display: flex;
    gap: 12px;
    height: 100vh;
    overflow: hidden;
    flex-wrap: wrap;
    justify-content: center;
    position: relative;
  }
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(255,255,255,0.12);
    z-index: 0;
    pointer-events: none;
  }
  #history    { flex: 1.05 1 330px; }
  #main       { flex: 2   1 430px; }
  #all-restaurants { flex: 1.18 1 440px; }

  #history, #main, #all-restaurants {
    background: rgba(255, 248, 230, 0.92);
    padding: 20px 18px;
    border-radius: 14px;
    box-shadow: 0 10px 15px rgba(217,175,65,0.6),
                inset 0 0 15px rgba(255,244,210,0.8);
    border: 3px solid #d9ae41;
    font-size: 16px;
    font-weight: 600;
    position: relative;
    line-height: 1.5;
    z-index: 1;
    min-width: 0;
    backdrop-filter: saturate(180%) blur(8px);
  }
  #history::before, #main::before, #all-restaurants::before {
    content: "";
    position: absolute;
    top: 12px; left: 12px; right: 12px; bottom: 12px;
    border: 3px solid #d6b84a;
    border-radius: 12px;
    pointer-events: none;
  }
  #history {
    max-height: 95vh;
    overflow-y: unset;
    display: flex;
    flex-direction: column;
    gap: 20px;
    justify-content: flex-start;
  }
  .history-block { margin-bottom: 0; display: flex; flex-direction: column; }
  #history-main, #history-dessert {
    max-height: 285px;
    overflow-y: auto;
    margin-top: 6px;
  }
  @media (max-width:900px) {
    #history-main, #history-dessert { max-height: 175px; }
  }
  #main {
    max-height: 95vh;
    text-align: center;
    display: flex;
    flex-direction: column;
    z-index: 1;
    align-items: center;
    justify-content: flex-start;
  }
  .button-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-bottom: 12px;
    width: 100%;
  }
  .button-row button {
    width: auto;
    display: inline-block;
    margin: 0;
    max-width: 180px;
  }
  #result {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    max-height: 45vh;
  }
  #itinerary {
    flex: 0 0 auto;
    margin-top: 12px;
    padding: 18px 10px 10px 10px;
    font-weight: 600;
    height: 200px;
    max-height: 200px;
    overflow-y: auto;
    border-radius: 14px;
    background: rgba(255, 248, 230, 0.95);
    box-shadow: 0 8px 12px rgba(217, 175, 65, 0.7), inset 0 0 14px rgba(255, 244, 210, 0.85);
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }
  #itinerary-list {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #itinerary .history-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    background: #fffceb;
    border-radius: 7px;
    padding: 12px 14px;
    margin-bottom: 10px;
    box-shadow: inset 0 0 6px rgba(217,175,65,0.35);
    word-break: break-word;
    width: 88%;
    max-width: 480px;
    font-size: 17px;
  }
  #itinerary .info {
    flex: 1;
    text-align: center;
    margin-right: 18px;
    overflow-wrap: break-word;
  }
  #itinerary .info strong {
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
    color: #916f02;
    font-size: 18px;
  }
  #itinerary .info a {
    color: #916f02;
    text-decoration: none;
  }
  #itinerary .info a:hover {
    text-decoration: underline;
    color: #d2a520;
  }
  #itinerary .history-item button {
    background: #b28722;
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: bold;
    padding: 7px 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
    font-size: 16px;
    margin-left: 8px;
  }
  #itinerary .history-item button:hover {
    background-color: #dbae3e;
  }
  h1,h2 { color: #b47f18; text-shadow: 1px 1px 3px rgba(168,134,20,0.8); margin-bottom: 15px;}
  button {
    background: linear-gradient(135deg, #b28722, #dbae3e);
    border: none; padding: 13px 26px; color: #fff8dc;
    font-size: 18px; font-weight: 700;
    border-radius: 28px; cursor: pointer; box-shadow: 0 5px 12px rgba(181,135,34,0.7);
    user-select: none;
  }
  .result-card {
    background: #fff5d9; border-radius: 12px; padding: 18px 14px;
    margin: 10px auto; width: 100%; max-width: 400px;
    box-shadow: 0 4px 15px rgba(208,169,47,0.7);
    text-align: center;
    font-size: 17px;
  }
  .result-card + .result-card { margin-top: 15px; }
  .address-link { color: #916f02; text-decoration: none;}
  .history-item {
    background: #fffceb; border-radius: 7px;
    padding: 11px 16px; margin-bottom: 14px;
    box-shadow: inset 0 0 6px rgba(217,175,65,0.35);
    word-break: break-word;
    font-size: 17px;
    text-align: center;
  }
  #all-restaurants strong { display:block; margin-top:16px; margin-bottom: 2px; font-size:17px;}
  ul {
    list-style: none;
    padding-left: 8px;
    font-size: 18px;
    margin-bottom: 10px;
    max-height: 470px;
    overflow-y: auto;
  }
  li {
    padding: 8px 0;
    border-bottom: 1px solid #d1b252;
    user-select: none;
  }
  @media (max-width:900px) {
    #history-main, #history-dessert { max-height: 175px; }
    body {flex-direction: column; padding: 14px;}
    #history,#main,#all-restaurants {width: 100%; min-width: unset; flex: none; margin-bottom: 10px;}
    #main {max-height: none; align-items: center;}
    .button-row button {font-size:16px; padding:9px 11px; max-width:110px;}
    .button-row {flex-wrap: wrap; gap:12px; margin-bottom:12px;}
    #itinerary {height: 140px; max-height: 140px; width:100%; margin-top: 8px;}
    #itinerary-list {width: 100%;}
    #result {max-height: 27vh;}
    ul {max-height: 220px;}
    #itinerary .history-item {font-size: 16px; padding: 10px 8px; max-width: 98%;}
  }
</style>
</head>
<body>

<div id="history">
  <div class="history-block">
    <h2>🍜 正餐歷史 (前5筆)</h2>
    <div id="history-main"></div>
  </div>
  <div class="history-block">
    <h2>🍮 甜點歷史 (前5筆)</h2>
    <div id="history-dessert"></div>
  </div>
</div>

<div id="main">
  <h1>🍽 澳門美食樂透抽籤</h1>
  <div class="button-row">
    <button onclick="drawLottery('main')">抽正餐</button>
    <button onclick="drawLottery('dessert')">抽甜點 / 飲料</button>
    <button onclick="drawBoth()">同時抽正餐 + 甜點</button>
  </div>
  <div id="result"></div>
  <div id="itinerary">
    <h2>📅 今日行程</h2>
    <div id="itinerary-list"></div>
  </div>
</div>

<div id="all-restaurants">
  <h2>所有餐廳</h2>
  <strong>🍜 正餐類</strong>
  <ul id="list-main"></ul>
  <strong>🍮 甜點 / 飲料類</strong>
  <ul id="list-dessert"></ul>
</div>

<script>
const restaurantsMain = [
  {name:"陳光記燒臘店", dish:"黑椒燒鴨、燒鵝、三拼飯", time:"09:00–01:00", address:"澳門南灣羅保博士街19-39號萬勝大廈"},
  {name:"雅馨緬甸餐廳", dish:"魚湯粉、馬拉盞雞絲撈麵", time:"08:00–19:30", address:"澳門新橋飛能便度街27號地下F座栢盧大廈"},
  {name:"金利食店", dish:"咖哩雞米、雙汁雞腩米、咖哩牛腩", time:"07:00–16:45", address:"澳門雅廉訪大馬路85號C地下"},
  {name:"德仔記燒味茶餐廳", dish:"掛爐燒鴨飯、西多士、叉燒", time:"07:00–21:00", address:"澳門氹仔南京街161號-177號太子花城地下B,C,D舖"},
  {name:"新記美食", dish:"豬大腸、雞中翅、丸類", time:"07:00–23:30", address:"澳門馬場大馬路18號栢麗花園第一座及二座地下U鋪"},
  {name:"彪記腸粉美食", dish:"香滑腸粉、鹹肉粽、福滿魚翅雞湯泡飯", time:"10:00–21:00", address:"澳門金碧坊一樓107號舖"}
];
const restaurantsDessert = [
  {name:"喜蓮咖啡", dish:"乾炒牛肉粒飯、炸咖哩角、椰汁紅豆冰", time:"周一07:00–17:00；周二至日07:30–20:30", address:"澳門氹仔飛能便度街南龍花園地下B84號"},
  {name:"新鴻發咖啡美食", dish:"法蘭西多士、西多士", time:"06:00–18:00", address:"澳門賈伯樂提督街55號富明樓A號"},
  {name:"世紀咖啡", dish:"瓦煲咖啡、厚蛋鹹牛肉多士", time:"11:00–19:00 (周一休)", address:"澳門南灣湖景大馬路744F號湖景豪庭地下E號舔"},
  {name:"Goat Bakers", dish:"奶酪花杯子、彩虹牛角麵包", time:"12:00–20:00", address:"澳門永聯台52號永聯大廈地舖"},
  {name:"世記咖啡", dish:"瓦煲咖啡、香滑奶茶、豬扒包", time:"11:00–19:00 (周二休)", address:"澳門乾草圍15號"},
  {name:"南屏雅敘", dish:"三文治、多士、蛋撻", time:"06:30起營業", address:"澳門大三巴牌坊附近"},
  {name:"Inn Cafe", dish:"澳門特色小吃", time:"營業時間待確認", address:"澳門嘉樂庇總督大馬路822號"},
  {name:"安琪兒咖啡及酒廊", dish:"咖啡、輕食", time:"07:30–23:00 (五六日到00:00)", address:"澳門葡京人酒店1樓L04舖"},
  {name:"瑪嘉烈蛋塔店", dish:"葡式蛋塔", time:"平日08:30–16:30；假日10:00–18:00 (周三休)", address:"澳門馬統領圍66號"},
  {name:"安德魯餅店", dish:"葡式蛋塔", time:"07:00–21:00", address:"澳門路環市區戴紳禮街1號"},
  {name:"義順牛奶公司", dish:"雙皮燉奶、燉奶", time:"11:00–21:00", address:"澳門亞美打利庇盧大馬路381號"},
  {name:"檸檬車露冰店", dish:"義大利手拉雪糕", time:"12:00–22:00", address:"澳門氹仔地堡街115號J鋪"},
  {name:"禮記雪糕", dish:"紅豆冰、懷舊雪糕三文治", time:"12:00–19:00", address:"澳門荷蘭園大馬路12號地下"},
  {name:"禮記雪糕(重複分店)", dish:"傳統雪糕、紅豆雪條", time:"12:00–19:00", address:"澳門荷蘭園大馬路12號地下"},
  {name:"八目烘培 bamu bakery", dish:"葡式蛋塔、焦糖蛋塔", time:"10:00–19:00", address:"澳門果欄街25號德富大廈地下B舖"},
  {name:"澤賢記雞蛋仔", dish:"葡撻雞蛋仔、多口味雞蛋仔", time:"10:30–21:00", address:"澳門安樂街13-15號"}
];
let historyMain = [], historyDessert = [], itinerary = [];
function drawLottery(type){
  const pool = type==='main'?restaurantsMain:restaurantsDessert;
  let list= type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0; avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  displayResult([pick]);
  list.unshift(pick);
  if(list.length>5) list.pop();
  if(type==='main') historyMain=list; else historyDessert=list;
  updateHistory();
}
function drawBoth(){
  const pickMain= pickOne('main');
  const pickDessert= pickOne('dessert');
  displayResult([pickMain,pickDessert]);
  updateHistory();
}
function pickOne(type){
  const pool= type==='main'?restaurantsMain:restaurantsDessert;
  let list= type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0; avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  list.unshift(pick);
  if(list.length>5) list.pop();
  if(type==='main') historyMain=list; else historyDessert=list;
  return pick;
}
function displayResult(picks){
  document.getElementById('result').innerHTML= picks.map(p=>`
    <div class="result-card">
      <h2>${p.name}</h2>
      <p>🍴 ${p.dish}</p>
      <p>🕒 ${p.time}</p>
      <p>📍 <a class="address-link" target="_blank" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.address)}">${p.address}</a></p>
      <button onclick='addToItinerary(${JSON.stringify(p)})'>➕ 加入行程</button>
    </div>
  `).join('');
}
function updateHistory(){
  document.getElementById('history-main').innerHTML= historyMain.map(h=>`<div class="history-item"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
  document.getElementById('history-dessert').innerHTML= historyDessert.map(h=>`<div class="history-item"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
}
function renderLists(){
  document.getElementById('list-main').innerHTML= restaurantsMain.map(r=>`<li>${r.name}</li>`).join('');
  document.getElementById('list-dessert').innerHTML= restaurantsDessert.map(r=>`<li>${r.name}</li>`).join('');
}
function addToItinerary(p){
  if(itinerary.some(i=>i.name===p.name)) return;
  itinerary.push(p);
  updateItineraryUI();
}
function removeFromItinerary(name){
  itinerary= itinerary.filter(i=>i.name!==name);
  updateItineraryUI();
}
function updateItineraryUI(){
  document.getElementById('itinerary-list').innerHTML= itinerary.map((i,idx)=>`
    <div class="history-item">
      <div class="info">
        <strong>${idx+1}. ${i.name}</strong><br>
        ${i.dish}<br>
        <a target="_blank" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.address)}">${i.address}</a>
      </div>
      <button onclick="removeFromItinerary('${i.name.replace(/'/g,"\\'")}')">刪除</button>
    </div>
  `).join('');
}
renderLists();
updateHistory();
</script>
</body>
</html>
